<!doctype html><html lang="zh-Hant"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="assets/favicon.png" type="image/png"><title>阿萬與動物朋友按鈕</title><style>:root{--bg:#0b0d10;--search:#0b0d1000;--fg:#e9eef5;--muted:#a8b3c7;--card:#141821;--card-2:#212832;--border:#202636;--accent:#6aa9ff;--heart:#ff5a7a;--chip-fg:#0b0d10;--shadow:0 6px 24px rgba(0,0,0,.25);--bg-blend-mode:normal;--bg-opacity:0.25;--control-h:44px;--liquid-hover:rgba(96,150,255,.20)}:root.light{--bg:#f8fafc;--search:#f8fafc00;--fg:#0d1320;--muted:#4b5563;--card:#ffffff;--card-2:#f3f6fb;--border:#e5e7eb;--accent:#2563eb;--heart:#e11d48;--chip-fg:#ffffff;--shadow:0 4px 18px rgba(2,6,23,.08);--bg-blend-mode:normal;--bg-opacity:0.35}*{box-sizing:border-box}body,html{height:100%}body{margin:0;background-color:var(--bg);color:var(--fg);font:medium ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Noto Sans,"Helvetica Neue",Arial;position:relative;z-index:1}body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background-image:url('assets/background-by-jia.avif');background-size:auto 90%;background-repeat:repeat;background-attachment:fixed;mix-blend-mode:var(--bg-blend-mode);opacity:var(--bg-opacity);z-index:-1}a{color:inherit}.wrap{max-width:1100px;margin:0 auto;padding:20px}header{display:flex;align-items:center;flex-wrap:wrap;gap:12px;margin-bottom:14px}header h1{white-space:nowrap;margin-right:auto}h1{font-size:1.4rem;margin:0 8px 0 0;letter-spacing:.5px}.theme-toggle{border:1px solid var(--border);background:var(--card);color:var(--fg);border-radius:10px;padding:8px 12px;cursor:pointer;box-shadow:var(--shadow)}.search-row{display:flex;flex-wrap:wrap;gap:0;align-items:stretch;position:sticky;top:0;background:var(--search);padding:8px 0 12px;z-index:5}.searchbar{flex:1 1 260px;display:flex;align-items:center;gap:6px;background:var(--glass-bg)!important;border:1px solid var(--glass-border)!important;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border-radius:12px;padding:6px 8px;box-shadow:var(--shadow);position:relative;height:var(--control-h)}.searchbar input{flex:1;background:0 0;border:0;outline:0;color:var(--fg);font-size:16px;min-width:160px;height:100%;line-height:var(--control-h);padding:0 6px}.chips{display:flex;flex-wrap:wrap;gap:4px;margin-top:4px}.chip{display:inline-flex;align-items:center;gap:4px;border-radius:999px;padding:4px 8px;font-size:12px;color:var(--chip-fg);box-shadow:0 2px 6px rgba(0,0,0,.18)}.chip button{appearance:none;border:0;background:0 0;color:inherit;cursor:pointer;font-size:14px;line-height:1;padding:0 0 0 2px}.searchbar .chip{cursor:pointer}.section-title{margin:18px 0 10px;font-weight:700;letter-spacing:.3px}.grid{display:grid;gap:4px;grid-template-columns:repeat(6,minmax(0,1fr))}@media (max-width:1000px){.grid{grid-template-columns:repeat(5,minmax(0,1fr))}}@media (max-width:800px){.grid{grid-template-columns:repeat(4,minmax(0,1fr))}}@media (max-width:600px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}@media (max-width:400px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}.sound{background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:saturate(1) blur(8px);-webkit-backdrop-filter:saturate(1) blur(8px);border-radius:12px;padding:8px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:5px 2px;user-select:none;cursor:pointer;transition:transform .06s ease}.sound:active{transform:scale(.985)}.sound-top{display:flex;align-items:center;gap:4px}.title{font-weight:600;font-size:smaller;flex:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.heart{width:24px;height:24px;border-radius:50%;place-items:center;border:1px solid var(--border);background:var(--card-2);cursor:pointer;flex:0 0 auto}.heart svg{width:16px;height:16px;display:block}.heart[aria-pressed=true] svg path{fill:var(--heart)}.tags{display:flex;flex-wrap:wrap;gap:6px}.tag{border-radius:999px;padding:3px 6px;font-size:small;color:var(--chip-fg);cursor:pointer;white-space:nowrap;box-shadow:0 2px 6px rgba(0,0,0,.16)}.stage{position:fixed;left:0;right:0;bottom:12px;display:flex;flex-wrap:wrap;gap:12px 14px;justify-content:center;pointer-events:none;z-index:40;padding:0 12px}.group{display:inline-flex;gap:8px;align-items:flex-end}.avatar{width:75px;height:75px;border-radius:999px;background:0 0;overflow:hidden;border:2px solid rgba(255,255,255,.8);box-shadow:0 8px 24px rgba(0,0,0,.35);transform-origin:50% 100%}.avatar>img{width:100%;height:100%;object-fit:cover}@keyframes popIn{0%{transform:translateY(20px) scale(.7);opacity:0}100%{transform:translateY(0) scale(1);opacity:1}}@keyframes jitter{0%,100%{transform:translateY(0) rotate(0)}20%{transform:translateY(-2px) rotate(-1deg)}40%{transform:translateY(1px) rotate(1deg)}60%{transform:translateY(-1px) rotate(.6deg)}80%{transform:translateY(1px) rotate(-.6deg)}}@keyframes hopOut{0%{transform:translateY(0);opacity:1}22%{transform:translateY(-12px);opacity:1}100%{transform:translateY(60px);opacity:0}}.pop-in{animation:popIn .28s cubic-bezier(.2,.9,.18,1) both}.jit{animation:jitter .9s ease-in-out infinite}.hop-out{animation:hopOut .5s cubic-bezier(.2,.8,.2,1) forwards}.hidden{display:none}.desc{color:var(--muted);font-size:14px;margin:0 0 6px}.empty{color:var(--muted);padding:12px 0}.row{display:flex;gap:10px;flex-wrap:wrap}.btn{border:1px solid var(--border);background:var(--card);color:var(--fg);border-radius:10px;padding:8px 12px;cursor:pointer}.tabs{display:flex;gap:8px;align-items:center;flex-wrap:wrap}.tab{display:inline-block;padding:6px 16px;font-size:14px;border:1px solid var(--border);border-radius:999px;background:var(--card-2);color:var(--fg);cursor:pointer;transition:background .15s ease,color .15s ease}.tab:hover{background:var(--card)}.tab.active{background:var(--accent);border-color:var(--accent);color:var(--chip-fg)}@media (max-width:600px){header .tabs{margin-top:8px}header .theme-toggle{margin-top:8px}}.section-header{display:flex;align-items:center;justify-content:space-between;margin:14px 0 8px}.section-header .actions{display:flex;gap:8px}.section-header h3{margin:0;font-size:1rem;font-weight:600;letter-spacing:.2px}.small-btn{font-size:12px;padding:4px 8px;border-radius:8px}.tag-list{display:flex;flex-wrap:wrap;gap:6px 8px;margin:8px 0}.tag-list .tag{cursor:pointer}.menu{position:fixed;z-index:9999;min-width:180px;background:var(--glass-bg)!important;border:1px solid var(--glass-border)!important;backdrop-filter:saturate(1.8) blur(12px);-webkit-backdrop-filter:saturate(1.8) blur(12px);border-radius:12px;overflow:hidden}.menu.hidden{display:none}.menu-item{padding:10px 12px;cursor:pointer;border-bottom:1px solid var(--border)}.menu-item:last-child{border-bottom:0}.menu-item:hover{background:var(--liquid-hover)}.toast{position:fixed;left:50%;bottom:80px;transform:translateX(-50%);background:var(--card);border:1px solid var(--border);padding:10px 14px;border-radius:10px;box-shadow:var(--shadow);z-index:70}.toast.hidden{display:none}.glow-persistent{box-shadow:0 0 0 4px rgba(106,169,255,.5),0 0 12px rgba(106,169,255,.75);transition:box-shadow .3s ease}:root{--glass-bg:rgba(20,24,33,.8);--glass-border:rgba(255,255,255,.12)}:root.light{--glass-bg:rgba(255,255,255,.6);--glass-border:rgba(15,23,42,.12)}.glass{background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:blur(3px);-webkit-backdrop-filter:blur(3px);background-clip:padding-box;box-shadow:var(--shadow)}.menu,.searchbar,.sound{background:var(--glass-bg)!important;border-color:var(--glass-border)!important;backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px)}header{position:relative}.nav-toggle{display:none;align-items:center;justify-content:center;border:1px solid var(--border);background:var(--card);color:var(--fg);border-radius:10px;padding:8px;cursor:pointer;box-shadow:var(--shadow)}@media (max-width:760px){.nav-toggle{display:inline-flex}header .tabs{display:none;position:absolute;right:0;top:100%;padding:8px;border-radius:12px;gap:6px;flex-direction:column;align-items:stretch;min-width:180px;z-index:120;background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:saturate(1.8) blur(12px);-webkit-backdrop-filter:saturate(1.8) blur(12px);box-shadow:var(--shadow)}body.nav-open header .tabs{display:flex}}body.bg-full{--bg-opacity:1!important}.bg-page{min-height:50vh}.bg-credit{position:fixed;right:16px;bottom:16px;font-size:large;padding:8px 12px;border-radius:10px;font-weight:800;background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:saturate(1.8) blur(10px);-webkit-backdrop-filter:saturate(1.8) blur(10px);box-shadow:var(--shadow);z-index:60}.bg-credit a{text-decoration:underline}#clearBtn.btn{height:var(--control-h);display:inline-flex;align-items:center;justify-content:center;padding:0 14px}.search-row .searchbar{border-top-right-radius:0;border-bottom-right-radius:0;border-right:0!important}.search-row #clearBtn{border-top-left-radius:0;border-bottom-left-radius:0;border-left:1px solid var(--glass-border);background:var(--glass-bg);backdrop-filter:saturate(1.5) blur(8px);-webkit-backdrop-filter:saturate(1.5) blur(8px)}#page-about{background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:saturate(1.8) blur(12px);-webkit-backdrop-filter:saturate(1.8) blur(12px);border-radius:14px;padding:14px 16px;box-shadow:var(--shadow)}header{flex-wrap:nowrap}header h1{white-space:normal;min-width:0;overflow-wrap:anywhere}.search-row{flex-wrap:nowrap}.search-row .searchbar{flex:1 1 auto;min-width:0}.search-row .searchbar input{min-width:0}.search-row #clearBtn{flex:0 0 auto;white-space:nowrap}.drag-ghost{opacity:.6;transform:scale(.98)}.drag-chosen{outline:2px dashed var(--accent)}.dragging{cursor:grabbing}body.sorting #favGrid .card{cursor:grab}</style></head><body><div class="wrap"><header><h1>阿萬與動物朋友按鈕</h1><button id="navToggle" class="nav-toggle" aria-label="打開選單" aria-expanded="false" aria-controls="primaryNav" title="選單"><svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 6h18M3 12h18M3 18h18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg></button><nav id="primaryNav" class="tabs" aria-label="主選單"><button class="tab active" data-page="home">主頁</button> <button class="tab" data-page="bg" id="tab-bg">背景</button> <button class="tab" data-page="game">小遊戲</button> <button class="tab" data-page="about">關於</button> <button id="themeBtn" class="theme-toggle" aria-label="切換主題">電燈開關</button></nav></header><div id="page-home"><div class="search-row"><div class="searchbar" role="search"><svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16a6.471 6.471 0 0 0 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"/></svg> <input id="q" placeholder="搜尋標題或 #標籤（可多個，用空白分隔）" autocomplete="off"><div id="activeChips" class="chips"></div></div><button id="clearBtn" class="btn" aria-label="清除搜尋">清除</button></div><div id="tagList" class="tag-list"></div><div class="section-header"><h3>最愛音效</h3><div class="actions"><button id="sortFavBtn" class="btn small-btn">手動排序</button><button id="doneSortBtn" class="btn small-btn glow-persistent hidden">儲存排序</button><button id="shareFavBtn" class="btn small-btn">分享最愛</button></div></div><div id="favGrid" class="grid"></div><div id="favEmpty" class="empty hidden">還沒有最愛。點音效右上的 ❤️ 加入最愛。</div><div id="receivedSection" class="hidden"><div id="receivedHeader" class="section-header"><h3>收到的列表</h3></div><div id="receivedGrid" class="grid"></div></div><div class="section-header"><h3>全部音效</h3><div class="actions"><button id="shuffleBtn" class="btn small-btn">洗牌</button> <button id="resetOrderBtn" class="btn small-btn">預設順序</button></div></div><p class="desc">提示：點音效即可播放；右鍵（或行動裝置長按）可分享/下載。</p><div id="grid" class="grid"></div><div id="empty" class="empty hidden">沒有符合搜尋的音效。</div></div><div id="page-game" class="hidden"><div id="concentration-game"><div class="cg-header"><div class="cg-stats"><span id="cg-timer">00:00</span> <span id="cg-accuracy">準確率：--%</span></div><div class="cg-controls"><button id="cg-restart" class="btn small-btn">重開一局</button></div></div><div id="cg-board" class="cg-board"></div><div id="cg-result" class="cg-result hidden"></div><div id="cg-rules" class="cg-rules" aria-labelledby="cg-rules-title"><h4 id="cg-rules-title">記憶小遊戲規則</h4><ul><li>第一次翻開的牌不對計分造成影響，屬於記憶提示。</li><li>每翻開兩張卡，若為相同主播的相同音效即為配對，共有 8 對配對。</li></ul></div></div><style>.cg-board{display:grid;grid-template-columns:repeat(4,70px);grid-template-rows:repeat(4,70px);gap:8px;justify-content:center;margin:12px auto;width:min(720px,96%);padding:12px;border-radius:12px;background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:saturate(1.8) blur(12px);-webkit-backdrop-filter:saturate(1.8) blur(12px);box-shadow:var(--shadow);justify-items:center}.cg-card{width:70px;height:70px;background:#888;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative;perspective:600px;will-change:transform;transition:transform 140ms ease,box-shadow 140ms ease;user-select:none}.cg-card.matched{opacity:.5;pointer-events:none}.cg-card-inner{width:100%;height:100%;transition:transform .4s cubic-bezier(.4,2,.6,1);transform-style:preserve-3d;position:relative}.cg-card.flipped .cg-card-inner{transform:rotateY(180deg)}.cg-card-back,.cg-card-front{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:10px;display:flex;align-items:center;justify-content:center}.cg-card-front{background:#888}.cg-card.clicked,.cg-card:active{transform:scale(1.06);box-shadow:0 10px 28px rgba(0,0,0,.28)}.cg-card-back{background:#fff;transform:rotateY(180deg);overflow:hidden}.cg-card-back img{width:80%;height:80%;object-fit:contain;border-radius:8px}.cg-lock{position:absolute;right:6px;top:6px;background:rgba(0,0,0,.4);color:#fff;width:20px;height:20px;display:flex;align-items:center;justify-content:center;border-radius:50%;font-weight:700;font-size:14px}.cg-header{display:flex;gap:6px;align-items:center;justify-content:space-between;margin:4px auto;padding:8px 12px;width:min(720px,96%);border-radius:12px;background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:saturate(1.8) blur(12px);-webkit-backdrop-filter:saturate(1.8) blur(12px);box-shadow:var(--shadow);position:sticky;top:12px;z-index:60;flex-wrap:wrap}#cg-timer{font-size:1rem;font-weight:700;color:var(--fg);letter-spacing:.6px;min-width:25px;text-align:left}#cg-timer.cg-running{color:#34d399}#cg-accuracy{color:var(--muted);font-weight:600;margin-left:8px}.cg-stats{display:flex;align-items:center;gap:8px;flex:1 1 auto;min-width:0}.cg-controls{display:flex;align-items:center;gap:8px;flex:0 0 auto}.cg-header button{margin-left:8px;flex:0 0 auto}@media (max-width:420px){.cg-header{gap:8px;padding:8px}#cg-timer{font-size:1rem}.cg-board{grid-template-columns:repeat(4,56px);grid-template-rows:repeat(4,56px);gap:4px;padding:10px}.cg-card{width:56px;height:56px}}.cg-result{text-align:center;font-size:1.05rem;margin-top:18px;background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:saturate(1.8) blur(12px);-webkit-backdrop-filter:saturate(1.8) blur(12px);border-radius:14px;padding:14px 16px;box-shadow:var(--shadow);max-width:480px;margin:18px auto 0}.cg-result h3{margin:0 0 6px;font-size:1.15rem}.cg-result .stats{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;color:var(--muted);font-weight:600}.cg-result .big-num{font-size:1.25rem;font-weight:700;color:var(--fg)}.cg-rules{width:min(720px,96%);margin:14px auto 28px;background:var(--glass-bg);border:1px solid var(--glass-border);backdrop-filter:saturate(1.8) blur(12px);-webkit-backdrop-filter:saturate(1.8) blur(12px);border-radius:12px;padding:12px 16px;box-shadow:var(--shadow);color:var(--fg)}.cg-rules h4{margin:0 0 8px;font-size:1.05rem}.cg-rules ul{margin:0;padding-left:18px;color:var(--muted)}</style></div><div id="page-bg" class="bg-page hidden" aria-labelledby="tab-bg" role="region"><div class="bg-credit"><a href="https://x.com/jiauwu_0730" target="_blank" rel="noopener">背景插畫由 Jia 繪製</a></div></div><div id="page-about" class="hidden"><p>本站由粉肝製作，並非由厭世醫師阿萬官方經營。音效內容皆是粉肝去脈絡式、斷章取義的剪輯，僅供娛樂。最後更新時間：2025/9/25。</p><p>阿萬本家→ <a href="https://x.com/drlifesucks" target="_blank">厭世醫師阿萬X</a>、<a href="https://www.youtube.com/@Dr.lifesucks" target="_blank">厭世醫師阿萬Youtube</a></p><p><a href="https://discord.gg/e6ch4VbRB4" target="_blank">音效板問題回報與建議區</a></p><h2>大德芳名錄</h2><p>感謝53、Kie在DC弄了一堆音效，讓南想到可以做這個網站，並在提出這個想法的一開始就弄了一堆音效過來。還有同樣感謝在原型階段就幫忙收集音效的米糕跟薰薰草。<br>感謝Jia繪製超可愛的背景圖跟收集了很多音效。<br><br>感謝粉肝們收集很多音效，豐富了這個網站（Word筆劃順）：<br>AmBinBong、CZ、HUI、Lococco de suzuran、Nokimi07、Sigh、TENN、Yichen沉沉、🌙🐰月桂葉香包♏🎵、布丁(25:00)、幸福柴柴、青末枝、凌伊LingYi（01）、夏白衫、澐▽米粉 肉干、貓貓雨。 以及其他回報問題、提出建議的粉肝們，你們讓這個網站的功能更完善。</p></div></div><div id="stage" class="stage" aria-hidden="true"></div><div id="menu" class="menu hidden" role="menu" aria-label="音效選單"></div><div id="toast" class="toast hidden" role="status" aria-live="polite"></div><script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.3/Sortable.min.js"></script><script>!function(){function e(e){return e+(e.includes("?")?"&":"?")+"v="+encodeURIComponent("ver2025-09-26-1")}function t(e,t=Math.random){for(let n=e.length-1;n>0;n--){const a=Math.floor(t()*(n+1));[e[n],e[a]]=[e[a],e[n]]}return e}const n={q:document.getElementById("q"),activeChips:document.getElementById("activeChips"),grid:document.getElementById("grid"),favGrid:document.getElementById("favGrid"),empty:document.getElementById("empty"),favEmpty:document.getElementById("favEmpty"),themeBtn:document.getElementById("themeBtn"),stage:document.getElementById("stage"),clearBtn:document.getElementById("clearBtn"),get menu(){return document.getElementById("menu")},get toast(){return document.getElementById("toast")},pageHome:document.getElementById("page-home"),pageGame:document.getElementById("page-game"),pageAbout:document.getElementById("page-about"),pageBg:document.getElementById("page-bg"),navToggle:document.getElementById("navToggle"),get navTabs(){return document.querySelectorAll(".tab")},tagList:document.getElementById("tagList"),receivedSection:document.getElementById("receivedSection"),receivedGrid:document.getElementById("receivedGrid"),receivedHeader:document.getElementById("receivedHeader"),sortFavBtn:document.getElementById("sortFavBtn"),doneSortBtn:document.getElementById("doneSortBtn"),shareFavBtn:document.getElementById("shareFavBtn"),shuffleBtn:document.getElementById("shuffleBtn"),resetOrderBtn:document.getElementById("resetOrderBtn")},a={tags:{},tagList:[],sounds:[],favorites:JSON.parse(localStorage.getItem("favorites")||"[]"),favSet:new Set,queryText:"",queryTags:new Set,contextTimer:null,page:"home",receivedList:[],toastTimer:null,usedTagList:[],isSorting:!1,sortable:null,highlightedCardId:"",cgRunning:!1,defaultSoundsSnapshot:[]};a.favSet=new Set(a.favorites);let s=null;const i={el(e,t={},n=[]){const a=document.createElement(e);return Object.entries(t).forEach(([e,t])=>{"class"===e?a.className=t:"style"===e?Object.assign(a.style,t):e.startsWith("on")&&"function"==typeof t?a.addEventListener(e.substring(2),t):null!=t&&a.setAttribute(e,t)}),(Array.isArray(n)?n:[n]).filter(Boolean).forEach(e=>{"string"==typeof e?a.appendChild(document.createTextNode(e)):a.appendChild(e)}),a},svgHeart(){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("viewBox","0 0 24 24"),e.innerHTML='<path d="M12 21s-6.716-4.438-9.428-7.15C.59 11.868.59 8.608 2.57 6.627 4.55 4.647 7.81 4.647 9.79 6.627L12 8.838l2.21-2.21c1.98-1.98 5.24-1.98 7.22 0 1.98 1.98 1.98 5.24 0 7.223C18.716 16.562 12 21 12 21z" fill="none" stroke="currentColor" stroke-width="1.5"/>',e}},o={slug:e=>e.normalize("NFKC").trim(),byId:e=>document.getElementById(e),saveFav(){localStorage.setItem("favorites",JSON.stringify(a.favorites))},inFav:e=>a.favSet.has(e),download(e,t){const n=document.createElement("a");n.href=e,n.download=t||"",document.body.appendChild(n),n.click(),n.remove()},parseQuery(){const e=a.queryText.trim(),t=e.length?e.split(/\s+/):[],n=new Set([...a.queryTags]),s=[];for(const e of t)e.startsWith("#")?n.add(o.slug(e.slice(1))):s.push(o.slug(e));return{terms:s,tags:n}},match(e,t,n){for(const t of n)if(!e.tags.some(e=>o.slug(e)===t))return!1;for(const n of t){const t=e.title.toLowerCase().includes(n.toLowerCase()),a=e.tags.some(e=>e.toLowerCase().includes(n.toLowerCase()));if(!t&&!a)return!1}return!0},debounce(e,t=200){let n=null;return(...a)=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null;try{e(...a)}catch(e){console.error(e)}},t)}}};function r(){const{terms:e,tags:t}=o.parseQuery(),n=new URLSearchParams(window.location.search);return e.length?n.set("q",e.join(" ")):n.delete("q"),t.size?n.set("tags",[...t].join(",")):n.delete("tags"),n.delete("sound"),n}function d(e=!1){const t=r(),n=new URLSearchParams(location.search);n.has("list")&&t.set("list",n.get("list")),n.has("sound")&&t.set("sound",n.get("sound")),a.page&&"home"!==a.page?t.set("page",a.page):t.delete("page");const s=t.toString(),i=`${location.pathname}${s?"?"+s:""}`;(e?history.pushState:history.replaceState).call(history,null,"",i)}function c(){const e=new URLSearchParams(location.search),t=e.get("q")||"",s=e.get("tags")||"";a.queryTags.clear();const i=s?s.split(",").map(e=>o.slug(e)).filter(Boolean):[];for(const e of i)a.queryTags.add(e);a.queryText=t;const r=i.map(e=>"#"+(a.tags[e]?.name||e));n.q.value=[t,...r].filter(Boolean).join(" ");const d=e.get("page");a.page="game"===d||"about"===d||"bg"===d?d:"home";const c=e.get("list");a.receivedList=c?c.split(",").filter(Boolean):[]}function l(){const e=new URLSearchParams(location.search).get("sound");if(!e)return;const t=o.byId("snd-"+e);if(t){if(t.scrollIntoView({behavior:"smooth",block:"center"}),a.highlightedCardId){const e=o.byId("snd-"+a.highlightedCardId);e&&e.classList.remove("glow-persistent")}a.highlightedCardId=e,t.classList.add("glow-persistent")}}function u(e){a.page=e,n.pageHome.classList.add("hidden"),n.pageGame.classList.add("hidden"),n.pageAbout.classList.add("hidden"),n.pageBg&&n.pageBg.classList.add("hidden"),"home"===e?n.pageHome.classList.remove("hidden"):"game"===e?n.pageGame.classList.remove("hidden"):"about"===e?n.pageAbout.classList.remove("hidden"):"bg"===e&&n.pageBg&&n.pageBg.classList.remove("hidden"),n.navTabs.forEach(t=>{t.getAttribute("data-page")===e?t.classList.add("active"):t.classList.remove("active")}),document.body.classList.toggle("bg-full","bg"===e||"about"===e),document.body.classList.remove("nav-open"),n.navToggle&&n.navToggle.setAttribute("aria-expanded","false"),d(!0)}function g(e){return navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).catch(()=>m(e)):m(e)}function m(e){const t=i.el("textarea",{style:{position:"fixed",left:"-9999px",top:"0"}},e);document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){}return t.remove(),Promise.resolve()}function f(e,t=3e3){const s=n.toast;s&&(a.toastTimer&&(clearTimeout(a.toastTimer),a.toastTimer=null),s.textContent=e,s.classList.remove("hidden"),t>0&&(a.toastTimer=setTimeout(()=>{s.classList.add("hidden"),a.toastTimer=null},t)))}function v(e,t,a){const s=n.menu;if(!s)return;s.innerHTML="";const r=i.el("div",{class:"menu-item",role:"menuitem",tabindex:"0"},"分享網址");r.addEventListener("click",async()=>{const t=function(e){const t=String(location.href||"").replace(/[?#].*$/,"");return`${t}${t.includes("?")?"&":"?"}sound=${encodeURIComponent(e)}`}(e.id);await g(t),h(),f("已複製分享連結");o.byId("snd-"+e.id)});const d=i.el("div",{class:"menu-item",role:"menuitem",tabindex:"0"},"下載音檔");d.addEventListener("click",()=>{h(),o.download(e.src,e.file)}),s.append(r,d),s.classList.remove("hidden"),requestAnimationFrame(()=>function(e,t){const a=n.menu;if(!a)return;const s=6,i=a.offsetWidth||180,o=a.offsetHeight||100,r=window.innerWidth,d=window.innerHeight,c=Math.min(Math.max(0,e),r-i-s),l=Math.min(Math.max(0,t),d-o-s);a.style.left=c+"px",a.style.top=l+"px"}(t,a))}function h(){const e=n.menu;e&&(e.classList.add("hidden"),e.innerHTML="")}function p(e){document.documentElement.classList.toggle("light","light"===e)}window.addEventListener("popstate",()=>{c(),k(),l()}),document.addEventListener("click",e=>{const t=n.menu;!t||t.classList.contains("hidden")||t.contains(e.target)||h()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&h()}),window.addEventListener("resize",h);p(localStorage.getItem("theme")||(matchMedia("(prefers-color-scheme:light)").matches?"light":"dark")),n.themeBtn.addEventListener("click",()=>{const e=document.documentElement.classList.contains("light")?"dark":"light";"dark"==e&&function(e){const t=a.sounds.find(t=>t.id===e);if(!t)return;const n=new Audio(t.src);n.preload="auto",n.addEventListener("play",()=>L(t,n)),n.addEventListener("ended",()=>E(t,n)),n.play().catch(()=>{})}("oNTWqg"),localStorage.setItem("theme",e),p(e)});const y=new Set;function L(t,s){const r=t.tags.map(e=>a.tags[o.slug(e)]).filter(e=>e&&"streamer"===e.role&&e.avatar);if(0===r.length)return;const d=i.el("div",{class:"group"});y.add(d),r.forEach((t,n)=>{const a=i.el("div",{class:"avatar pop-in jit",style:{animationDelay:60*n+"ms"}},[i.el("img",{src:e(t.avatar),alt:t.name})]);d.appendChild(a)}),n.stage.appendChild(d),s.__group=d}function E(e,t){const n=t.__group;if(!n)return;Array.from(n.children).forEach((e,t)=>{e.classList.remove("jit"),setTimeout(()=>{e.classList.add("hop-out"),e.addEventListener("animationend",()=>{e.remove(),0===n.childElementCount&&(n.remove(),y.delete(n))},{once:!0})},90*t)})}const S="favorites",b="favorites_version",B=/^[A-Za-z0-9_-]{6}$/;function w(e){if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t))return t.map(String);if(t&&"object"==typeof t)return Object.keys(t).filter(e=>!!t[e]).map(String)}catch(t){if("string"==typeof e)return e.split(/[,\s]+/).map(e=>e.trim()).filter(Boolean)}return[]}function T(e){if(!e)return"";let t=String(e);t=t.split("?")[0],t=t.replace(/^\.?\//,"");try{t=decodeURIComponent(t)}catch{}return t}function I(e){try{const t=localStorage.getItem(S);if(!function(e){const t=w(e);return 0!==t.length&&!t.every(e=>B.test(e))}(t))return void localStorage.setItem(b,"2");const n=w(t),{exact:s,lower:i}=function(e){const t=new Map,n=new Map;return e.forEach(e=>{const a=T(e.file),s=a.split("/").pop(),i=e.id||s;[a,s,"sounds/"+a,"sounds/"+s].forEach(e=>{t.set(e,i),n.set(e.toLowerCase(),i)})}),{exact:t,lower:n}}(e),o=[],r=new Set,d=[];n.forEach(e=>{const t=T(e),n=t.split("/").pop(),a=[t,t.replace(/^sounds\//,""),n,"sounds/"+t,"sounds/"+n];let c=null;for(const e of a)if(c=s.get(e)||i.get(e.toLowerCase()),c)break;c?r.has(c)||(r.add(c),o.push(c)):d.push(e)}),localStorage.setItem("favorites_legacy_backup",t),localStorage.setItem(S,JSON.stringify(o)),localStorage.setItem(b,"2"),a.favorites=o,a.favSet=new Set(o),f(`已升級最愛格式，共 ${o.length} 筆${d.length?`；未匹配 ${d.length} 筆`:""}。`),console.info("[favorites migration] done:",{converted:o.length,missing:d})}catch(e){console.warn("[favorites migration] error:",e)}}function k(){const{terms:e,tags:t}=o.parseQuery(),s=a.sounds.filter(n=>o.match(n,e,t)),r=a.receivedList.map(e=>a.sounds.find(t=>t.id===e)).filter(Boolean),c=new Map(a.sounds.map(e=>[e.id,e])),l=new Set(s.map(e=>e.id)),u=a.favorites.map(e=>c.get(e)).filter(e=>e&&l.has(e.id)),g=r.filter(e=>s.includes(e)&&!a.favSet.has(e.id)),m=s.filter(e=>!a.favSet.has(e.id)&&!g.includes(e));a.isSorting||C(n.favGrid,u,{inFav:!0}),C(n.receivedGrid,g),C(n.grid,m),n.favEmpty.classList.toggle("hidden",u.length>0),n.empty.classList.toggle("hidden",s.length>0),g.length>0?n.receivedSection&&n.receivedSection.classList.remove("hidden"):n.receivedSection&&n.receivedSection.classList.add("hidden"),function(){n.activeChips.innerHTML="";for(const e of a.queryTags){const t=a.tags[e],s=t?.color||"#94a3b8",o=i.el("span",{class:"chip",style:{background:s},onclick:()=>{a.queryTags.delete(e),k(),d(!0)}},[`#${t?.name||e}`,i.el("button",{title:"移除",onclick:()=>{a.queryTags.delete(e),k(),d(!0)}},"×")]);n.activeChips.appendChild(o)}}()}function C(e,t,n={inFav:!1}){e.innerHTML="";for(const a of t)e.appendChild(x(a,n))}function x(e,t={inFav:!1}){const n=!(!a.isSorting||!t.inFav),s={class:"heart","aria-pressed":String(o.inFav(e.id)),"aria-label":"加入/移除最愛"};n?(s.disabled="true",s["aria-disabled"]="true",s.title="正在編輯最愛排序，無法變更最愛"):s.onclick=t=>{t.stopPropagation(),function(e,t){if(a.isSorting)return void f("正在編輯最愛排序，無法變更最愛",1200);a.favSet.has(e)?a.favorites=a.favorites.filter(t=>t!==e):a.favorites.push(e);a.favSet=new Set(a.favorites),o.saveFav(),t&&t.setAttribute("aria-pressed",String(a.favSet.has(e)));k()}(e.id,r)};const r=i.el("button",s,i.svgHeart()),d=i.el("div",{class:"tags"});for(const t of e.tags){const e=o.slug(t),n=a.tags[e],s=n?.color||"#94a3b8",r=i.el("span",{class:"tag",style:{background:s}},t);r.addEventListener("click",t=>{t.stopPropagation(),A(e)}),d.appendChild(r)}const c=i.el("div",{id:"snd-"+e.id,"data-id":e.id,class:"sound",role:"button",tabindex:"0","aria-label":`播放音效：${e.title}`},[i.el("div",{class:"sound-top"},[i.el("div",{class:"title",title:e.title},e.title),r]),d]),l=async()=>{const t=new Audio(e.src);t.preload="auto",t.addEventListener("play",()=>L(e,t)),t.addEventListener("ended",()=>E(0,t));try{await t.play()}catch(e){console.error(e)}};a.isSorting&&t.inFav||c.addEventListener("click",l),a.isSorting&&t.inFav||c.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),l())}),a.isSorting&&t.inFav||c.addEventListener("contextmenu",t=>{t.preventDefault(),h(),v(e,t.clientX,t.clientY)});const u=()=>{clearTimeout(a.contextTimer)};return a.isSorting&&t.inFav||c.addEventListener("pointerdown",t=>{clearTimeout(a.contextTimer);const{clientX:n,clientY:s}=t;a.contextTimer=setTimeout(()=>{h(),v(e,n||window.innerWidth/2,s||window.innerHeight/2)},650)}),a.isSorting&&t.inFav||c.addEventListener("pointerup",u),a.isSorting&&t.inFav||c.addEventListener("pointerleave",u),c.addEventListener("pointercancel",u),c}function A(e){a.queryTags.add(e),k(),d(!0)}function M(){n.q.addEventListener("input",o.debounce(()=>{a.queryText=n.q.value;const e=n.q.value,t=e.split(/\s+/).pop()||"",s=t.startsWith("#")?t.slice(1).toLowerCase():e.trim().toLowerCase();s?a.tagList.filter(e=>e.name.toLowerCase().includes(s)||e.key.toLowerCase().includes(s)):a.tagList.slice(0,8);k(),d(!1)},180)),n.clearBtn.addEventListener("click",()=>{n.q.value="",a.queryText="",a.queryTags.clear(),k(),d(!0)}),n.navTabs.forEach(e=>{e.addEventListener("click",()=>{u(e.getAttribute("data-page")||"home")})}),n.navToggle&&n.navToggle.addEventListener("click",()=>{const e=!document.body.classList.contains("nav-open");document.body.classList.toggle("nav-open",e),n.navToggle.setAttribute("aria-expanded",String(e))}),document.addEventListener("click",e=>{if(document.body.classList.contains("nav-open")){const t=document.querySelector("header");t&&!t.contains(e.target)&&(document.body.classList.remove("nav-open"),n.navToggle&&n.navToggle.setAttribute("aria-expanded","false"))}}),n.navTabs.forEach(e=>e.addEventListener("click",()=>{document.body.classList.remove("nav-open"),n.navToggle&&n.navToggle.setAttribute("aria-expanded","false")})),n.shuffleBtn&&n.shuffleBtn.addEventListener("click",()=>{const e=[],n=[];a.sounds.forEach((t,s)=>{a.favSet.has(t.id)||(e.push(t),n.push(s))}),t(e),n.forEach((t,n)=>{a.sounds[t]=e[n]}),k()}),n.resetOrderBtn&&n.resetOrderBtn.addEventListener("click",()=>{if(!a.defaultSoundsSnapshot||!a.defaultSoundsSnapshot.length)return;const e=a.defaultSoundsSnapshot,t=new Map(e.map((e,t)=>[e.id,t]));a.sounds.sort((e,n)=>(t.has(e.id)?t.get(e.id):Number.MAX_SAFE_INTEGER)-(t.has(n.id)?t.get(n.id):Number.MAX_SAFE_INTEGER)),k()}),n.sortFavBtn&&n.doneSortBtn&&(n.sortFavBtn.addEventListener("click",()=>{a.isSorting=!0,document.body.classList.add("sorting"),n.sortFavBtn.classList.add("hidden"),n.doneSortBtn.classList.remove("hidden");const{terms:e,tags:t}=o.parseQuery(),s=new Map(a.sounds.map(e=>[e.id,e])),i=new Set(a.sounds.filter(n=>o.match(n,e,t)).map(e=>e.id)),r=a.favorites.map(e=>s.get(e)).filter(e=>e&&i.has(e.id));C(n.favGrid,r,{inFav:!0}),"undefined"!=typeof Sortable?a.sortable=Sortable.create(n.favGrid,{dataIdAttr:"data-id",animation:150,delay:150,delayOnTouchOnly:!0,ghostClass:"drag-ghost",chosenClass:"drag-chosen",dragClass:"dragging",filter:".heart",preventOnFilter:!1}):console.warn("SortableJS 未載入")}),n.doneSortBtn.addEventListener("click",()=>{const e=Array.from(n.favGrid.children).map(e=>e.getAttribute("data-id")).filter(Boolean);if(e.length){const t=a.favorites.filter(t=>!e.includes(t));a.favorites=e.concat(t),a.favSet=new Set(a.favorites),o.saveFav(),f("已儲存最愛排序")}a.sortable&&(a.sortable.destroy(),a.sortable=null),a.isSorting=!1,document.body.classList.remove("sorting"),n.doneSortBtn.classList.add("hidden"),n.sortFavBtn.classList.remove("hidden"),k()})),n.shareFavBtn&&n.shareFavBtn.addEventListener("click",async()=>{const e=[...a.favorites];if(0===e.length)return void f("沒有最愛可分享");const t=function(e){const t=r();e&&e.length?t.set("list",e.join(",")):t.delete("list"),t.delete("sound");const n=t.toString();return`${location.origin}${location.pathname}${n?"?"+n:""}`}(e);await g(t),f("已複製分享最愛列表連結")})}function q(){const n=document.getElementById("concentration-game"),i=document.getElementById("cg-board"),r=document.getElementById("cg-timer"),d=document.getElementById("cg-accuracy"),c=document.getElementById("cg-result"),l=document.getElementById("cg-restart");if(!n)return;let g=[],m=null,v=null,h=0,p=0,y=0,L=0,E=0,S=null,b=!1,B=!0,w=[],T=null,I=null,k=!1;function C(){const e=a.tagList.filter(e=>"streamer"===e.role).map(e=>o.slug(e.key)),n=t=>e.includes(t);let s=a.sounds.filter(e=>1===e.tags.filter(n).length&&!e.tags.includes("髒話"));s=t(s);let i=function(e){let t=[],n=0,a=0,s=0,i=0,o=0,r=0,d=0;for(const c of e){const e=Array.isArray(c.tags)?c.tags:[];if(n<2&&e.includes("阿萬")?(n++,t.push(c)):a<1&&e.includes("瓦哈")?(a++,t.push(c)):s<1&&e.includes("Matsuko")?(s++,t.push(c)):i<1&&e.includes("豹子頭")?(i++,t.push(c)):o<1&&e.includes("貓下去")?(o++,t.push(c)):r<1&&(e.includes("貓下去")||e.includes("豹子頭")||e.includes("Matsuko")||e.includes("豹子頭")||e.includes("瓦哈"))?(r++,t.push(c)):!(e.includes("阿萬")||e.includes("瓦哈")||e.includes("豹子頭")||e.includes("貓下去")||e.includes("Matsuko"))&&d<2&&(d++,t.push(c)),t.length>=8)break}return t.slice(0,8)}(s);return i=t(i),i.splice(8),i.map(e=>{const t=e.tags.find(n),s=a.tags[o.slug(t)];return{id:e.id,audio:e.src,streamer:t,avatar:s?.avatar||"",streamerName:s?.name||t,title:e.title}})}function x(){if(w=C(),!w||0===w.length)return c.innerHTML='<h3>無法開始遊戲</h3><p style="color:var(--muted)">目前沒有足夠的音效可供配對（需至少 1 組）。請回到主頁或稍後再試。</p>',c.classList.remove("hidden"),b=!1,void(a.cgRunning=!1);g=[];try{T&&(clearTimeout(T),T=null,I=null)}catch(e){}w.forEach((e,t)=>{g.push({type:"card",pairId:e.id,id:`${e.id}-0`,audio:e.audio,avatar:e.avatar,streamer:e.streamer,streamerName:e.streamerName,title:e.title,matched:!1,seen:!1}),g.push({type:"card",pairId:e.id,id:`${e.id}-1`,audio:e.audio,avatar:e.avatar,streamer:e.streamer,streamerName:e.streamerName,title:e.title,matched:!1,seen:!1})}),t(g),y=0,h=0,p=0,L=0,E=0,m=null,v=null,B=!0,k=!1,b=!1,a.cgRunning=!1,r&&(r.textContent=H(E),r.classList.remove("cg-running")),A(),$(),c.classList.add("hidden"),s=()=>{b=!1,a.cgRunning=!1,N(),q(),r&&r.classList.remove("cg-running"),i.innerHTML="";try{T&&(clearTimeout(T),T=null,I=null)}catch(e){}}}function A(){i.innerHTML="",g.forEach((t,n)=>{const s=document.createElement("div");s.className="cg-card",s.dataset.idx=n,(t.flipped||t.matched)&&s.classList.add("flipped"),t.matched&&s.classList.add("matched");const o=t.avatar?`<img src="${e(t.avatar)}" alt="${t.streamerName}">`:`<div style="font-weight:700;color:var(--muted);font-size:12px">${function(e){if(!e)return"";const t=e.replace(/\s+/g,"").slice(0,2);return String(t).replace(/[&<>\"]/g,"")}(t.streamerName)}</div>`;s.innerHTML=`\n        <div class="cg-card-inner">\n          <div class="cg-card-front"></div>\n          <div class="cg-card-back">\n            ${o}\n            ${t.matched?'<div class="cg-lock">✓</div>':""}\n          </div>\n        </div>\n      `,s.onclick=()=>function(e){if(void 0!==I&&I&&(I.f||I.s)){T&&(clearTimeout(T),T=null);const e=I;I=null,F(e.f,e.s),m=null,v=null,B=!0}if(!B)return;const t=g[e];if(t.flipped||t.matched)return;k||(k=!0,b=!0,a.cgRunning=!0,r&&r.classList.add("cg-running"),function(){S&&clearInterval(S);S=setInterval(()=>{a.cgRunning&&(E++,r.textContent=H(E))},1e3)}());if(t.flipped=!0,A(),m){if(!v){t._seenBefore=!!t.seen,t.seen=!0,v=t,q(),M=new Audio(t.audio),M.play().catch(()=>{}),t.title&&f(t.title,3e3),L++,B=!1;I={f:m,s:v},T&&(clearTimeout(T),T=null),T=setTimeout(()=>{T=null;const e=I;I=null,F(e.f,e.s),m=null,v=null,B=!0},500)}}else t._seenBefore=!!t.seen,t.seen=!0,m=t,q(),M=new Audio(t.audio),M.play().catch(()=>{}),t.title&&f(t.title,3e3);$()}(n),s.addEventListener("pointerdown",e=>{s.classList.add("clicked"),setTimeout(()=>s.classList.remove("clicked"),160)}),i.appendChild(s)})}let M=null;function q(){if(M){try{M.pause(),M.currentTime=0}catch(e){}M=null}}function F(e,t){if(e&&t){if(e.pairId===t.pairId)e.matched=!0,t.matched=!0,h+=2,y+=1;else{const n=!!e._seenBefore,a=!!t._seenBefore;n&&a?p+=2:(n||a)&&(p+=1),e.flipped=!1,t.flipped=!1}delete e._seenBefore,delete t._seenBefore,A(),$(),y===w.length&&(q(),function(){b=!1,a.cgRunning=!1,N(),q(),r&&r.classList.remove("cg-running");const e=h+p,t=e?Math.round(h/e*100):"--";c.innerHTML=`\n      <h3>完成！</h3>\n      <div class="stats">\n        <div><div class="big-num">${H(E)}</div><div class="muted">用時</div></div>\n        <div><div class="big-num">${h}</div><div class="muted">正確數</div></div>\n        <div><div class="big-num">${p}</div><div class="muted">錯解數</div></div>\n        <div><div class="big-num">${t}%</div><div class="muted">準確率</div></div>\n      </div>\n      <div style="display:flex;gap:8px;justify-content:center;margin-top:12px">\n        <button class="btn small-btn" id="cg-restart-2">再來一局</button>\n        <button class="btn small-btn" id="cg-home">回主頁</button>\n      </div>\n    `,c.classList.remove("hidden");try{if(100===t){const e=["c4B1fg","Hv3yFA","JkJ9-A","5VHtAg"],t=a.sounds&&a.sounds.find(t=>t.id===e[Math.floor(Math.random()*e.length)]);t&&t.src&&(q(),M=new Audio(t.src),M.play().catch(()=>{}),f("恭喜達成 100%",3e3))}}catch(e){}const n=document.getElementById("cg-restart-2");n&&n.addEventListener("click",()=>{x()});const s=document.getElementById("cg-home");s&&s.addEventListener("click",()=>{u("home")})}())}}function $(){r.textContent=H(E);const e=h+p,t=e?Math.round(h/e*100):null;d.textContent=null!==t?`準確率：${t}%`:"準確率：--%"}function H(e){return`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}function N(){S&&clearInterval(S),S=null}l.onclick=x,x()}(async function(){const[t,n]=await Promise.all([fetch(e("config/tags.json"),{cache:"no-store"}).then(e=>e.json()),fetch(e("config/sounds.json"),{cache:"no-store"}).then(e=>e.json())]);I(n),a.tags={},a.tagList=t.map(e=>({key:o.slug(e.key),name:e.name,color:e.color,role:e.role,avatar:e.avatar}));for(const e of a.tagList)a.tags[o.slug(e.key)]=e;a.sounds=n.map(t=>({id:t.id||t.file.replace(/^.*[\\\/]/,""),src:e(`sounds/${t.file}`),file:t.file,title:t.title,tags:t.tags.slice()})),a.defaultSoundsSnapshot=a.sounds.map(e=>({...e}));const s=new Set;a.sounds.forEach(e=>e.tags.forEach(e=>s.add(o.slug(e)))),a.usedTagList=a.tagList.filter(e=>s.has(e.key))})().then(()=>{c(),function(){const e=n.tagList;e&&(e.innerHTML="",a.usedTagList.forEach(t=>{const n=i.el("span",{class:"tag",style:{background:t.color||"#94a3b8"}},t.name);n.addEventListener("click",()=>{A(t.key)}),e.appendChild(n)}))}(),u(a.page),k(),l(),M();try{const e=document.querySelector("header h1");e&&e.addEventListener("click",e=>{if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)){if("home"===a.page)return location.reload();e.preventDefault(),a.queryText="",a.queryTags.clear(),n.q&&(n.q.value=""),u("home"),k(),d(!0);try{window.scrollTo({top:0,behavior:"smooth"})}catch(e){}}})}catch(e){}}).catch(e=>{console.error(e),n.grid.innerHTML='<div class="empty">載入設定檔失敗，請確認 <code>config/</code> 路徑是否正確。</div>'});const F=u;u=function(e){try{"function"==typeof s&&"game"!==e&&s()}catch(e){}F(e),"game"===e&&q()}}()</script></body></html>